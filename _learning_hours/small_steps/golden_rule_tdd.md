---
theme: small_steps
title: TDD的黄金法则
kata: shopping_basket
difficulty: 1
author: emilybache
---
# TDD的黄金法则

当人们开始学习TDD时，我经常看到他们努力记住先写测试代码。他们可能有这个打算，但却很容易忘记。这节课帮助他们练习这个技能，并记住为什么它很重要。

## 学习目标

* 记住在新的类和函数存在之前，在测试中设计新的类和函数。

## 会议大纲

* 10分钟的连接：TDD需要记住的事情
* 10分钟的概念：黄金法则
* 30分钟做：购物车
* 5分钟思考：记住黄金法则的提示

### 连接：做TDD时要记住的事情
用不同的连接来代替上面的连接，第二次做这个学习小时作为复习。

向小组提出这个问题，并要求他们想出5个答案。

"当你做测试驱动开发时，需要记住的5件重要事情是什么？"

答案可能是：

- 采取小的步骤，一次测试一件事
- 经常运行测试
- 重构测试代码和生产代码
- 只有在测试通过时才进行重构
- 制定一个测试列表
- 先写测试

这个学习小时的 "概念" 部分强调了 "先写测试" 的准则，但你也可以写出并强调他们提出的其他准则。

### 概念：黄金法则
在TDD中，_测试_驱动着生产代码的开发。你可以把它表述为一个黄金法则。

**不要写任何生产代码，直到你有一个失败的测试需要它**。

在测试代码中声明新的类、方法等。然后使用你的工具来创建这些东西。

把黄金法则写在挂图上，并使它看起来漂亮。问大家对它的看法。

你可以提到黄金法则有一个例外：你允许在重构时声明新的类和方法，只要它们已经被现有的测试所覆盖。

### 做：购物车
在创建它们所描述的类和函数之前，先练习编写测试。[购物车Kata](/kata_descriptions/shopping_basket.html)可能是一个好例子。

在你们分成两组进行Kata工作之前，在整个小组中花几分钟时间想出一个测试列表。类似的东西。

- 一件商品，50美元
- 两件物品，都是20美元
- 一件50美元，一件20美元
- 一件160美元
- 一件250美元

当他们做 "Kata" 时，试着阻止他们在没有创建测试案例的情况下创建 ShoppingBasket 类 或 Product 类 或 calculatePrice 函数。让他们练习在生产代码中存在之前在测试中使用这些东西。

### 总结：TDD中的设计
它是否能帮助你设计出更好的类和接口？使用TDD是否会阻止你设计出比你需要的更多的东西？以小组为单位进行讨论。
