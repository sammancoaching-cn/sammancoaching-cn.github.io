---
theme: small_steps
title: 用清单进行TDD
kata: vending_machine
difficulty: 2
author: emilybache
affiliation: ProAgile
---

# 用清单进行TDD

当别人开始为你制作测试列表时，TDD也许会更容易一些。

## 学习目标

* 描述测试列表如何支持迭代和增量工作
* 在TDD过程中使用测试列表

## 会议大纲

* 5分钟连接：瀑布阶段
* 5分钟概念：迭代和增量
* 35分钟具体：做一些 TDD
* 10分钟的反思：我们是否以小步骤工作


### 连接：瀑布阶段

在这个列表中标出属于瀑布法的阶段的活动：

* 单例
* 编码
* 冲刺计划
* 运营
* 设计
* 清洁代码
* 分析
* 测试
* 迭代
* 需求

当人们做完标记后，请他们对照[瀑布模型](https://en.wikipedia.org/wiki/Waterfall_model#Model)检查他们的答案。

### 概念：迭代和增量

整个问题太大，无法一下子解决。在瀑布模型中，你把工作分成几个阶段。分析阶段的目的是了解需求并研究如何分解问题。在 TDD 中，我们仍然需要这样做，但我们不是在一个阶段中一次做完，而是一次做一点。一点点的分析、设计、编码、测试......然后迭代。

制作一个测试列表是分析工作的一部分。你确定解决方案的一些片段是可测试的，你可以很快设计和构建。它帮助你开始工作。这没有标准的格式，它是一个非正式的列表，可能只有你会看。它不是一个要保存给后人的艺术品。测试列表上的每一项都是对你认为你可能需要的测试的提醒。一个输入示例和预期结果的草图，或者只是一个场景的名称。

每当你完成一个 TDD 周期，你就重新审视你的测试列表并更新它。通过做设计、编码和测试，你对问题有了更多的了解，可以重新审视分析。

### 具体练习：继续进行 TDD

* 你有一个失败的测试。在 'insert_coin' 中添加生产代码以使测试通过。
* 为 'dime' 添加一个测试。这枚硬币价值 10 美分。
* 为 'quarter' 添加一个测试。这枚硬币价值 25 美分。
* 增加对 'penny' 的测试。这枚硬币应该被机器拒绝。
* 参考完整的[自动售货机](/kata_descriptions/vending_machine.html)描述以了解更多功能。

这方面的起始位置在[VendingMachine-Approval-Kata](https://github.com/emilybache/VendingMachine-Approval-Kata)的'empty_machine'分支中，至少在目前的C版本中是如此。

### 结论：小步骤
回顾一下现在写的代码。有多少个测试被划掉了？有多少新的测试是你想到并添加到列表中的？你是否一直在小步快跑地工作？
